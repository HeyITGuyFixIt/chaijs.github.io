{"_id":"chai-assertions-count","_rev":"3-58d1e9cbd0f7bed299338d9d7dff88e9","name":"chai-assertions-count","dist-tags":{"latest":"1.0.2"},"versions":{"0.0.1":{"name":"chai-assertions-count","version":"0.0.1","description":"Plugin for ChaiJS allows checking how many assertions, asserts or expects were run per each test","main":"./index.js","types":"./index.d.ts","scripts":{"build":"rm -rf dist && tsc && rm -rf dist/tests && cp dist/src/* dist/. && rm -rf dist/src dist/mocha-hooks.js","lint":"eslint .","lint:fix":"eslint . --fix","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r \"./mocha-hooks.ts\" \"tests/**/*.ts\""},"repository":{"type":"git","url":"git+https://github.com/onechiporenko/chai-assertions-count.git"},"keywords":["chai","chai-plugin","assertions","testing"],"author":{"name":"onechiporenko"},"license":"MIT","bugs":{"url":"https://github.com/onechiporenko/chai-assertions-count/issues"},"homepage":"https://github.com/onechiporenko/chai-assertions-count#readme","devDependencies":{"@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.21","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0","chai":"^4.3.6","eslint":"^8.11.0","eslint-config-prettier":"^8.5.0","eslint-plugin-prettier":"^4.0.0","mocha":"^9.2.2","prettier":"^2.5.1","ts-node":"^10.7.0","typescript":"^4.5.4"},"peerDependencies":{"chai":"^4.3.6"},"gitHead":"0e76310e43c0a55b598d859c3eade7eff7273328","_id":"chai-assertions-count@0.0.1","_nodeVersion":"14.19.0","_npmVersion":"6.14.16","dist":{"integrity":"sha512-fPKvC5eGDQN5TUzL5ZnpoU10tIKX0XtElGglCQcAwHbFzfXFWeMhT4AbludRYka83gv8tjZppELxEeWDB8KOEQ==","shasum":"9d8f5977e3745070b0d7a382e80816710ba5a031","tarball":"https://registry.npmjs.org/chai-assertions-count/-/chai-assertions-count-0.0.1.tgz","fileCount":11,"unpackedSize":9991,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJiLUDkACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrbPQ//SSIC9icrOXoIMggyN1HCOV19j/uPEwyX50YWFReQC5/Zx9ZZ\r\noC7+acd6bYwFkO/TlUqDa2+GzerstBQ2WCoLXq1d5XKjNwHkswTpTw4iWxpI\r\nWp+omh8kUruaJ/T9lrvcRZWeIrTMN431hWdNjqkQI/veCX8+2w9HTXqF7v/M\r\nVzLIF2bAQvj1zqSe7tBWxG0++LyM/ve5IN3HTZZc+loJfUmR8yvDHkP7ElQe\r\noYB11FRzP2IbntocZJ7qj+jcOQgKqCjR1Hn52sBZX2htftSgOdXBf0f/2tis\r\nVkrplljKBZ+RPBSatLTk1H/2NUfsVtz4vNyvVRmjCkY3EfBeQfXV6vIHDuFj\r\nyJaw8Eq/hzfV5ZhLwCHBZ+R8ZEItOXCSHNMhyd3tYqq84b8aOPM0M9a45zQh\r\n/eIdOy1/uvImZqaC3rjzLXF234yp8mEN9Kj3vtaEbmIW8Ek77Wfwns/MNFxD\r\n5uCvcDycJKyt/rCMgVW138yppsZYxAqLVaomnHgpowCxeQ6txyhQ427DOuE4\r\npv9q0wGbz8fXVbyea67zZv/ULElhTz1GIKh1PAJIxgGH0SsjkdDj+tUvYeNK\r\nalsX3dGuWhbUO0KQYOywjRCviKAfBDSc9YLF5FKADpA39FAwj5mVgZC7ih5f\r\nJk8OQxORkPtGsLQtFbpg1rXzyZq5ZN0bBak=\r\n=Ka5o\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIHsng3q9l/FL9ScmsDyufW92JvlZTOuxKQdnk56Mq5reAiBWgseLJoKXqgP/UYIbrQw4qTgQ3eH1rce2XPrx+1MlHw=="}]},"_npmUser":{"name":"onechiporenko","email":"onechiporenko@apache.org"},"directories":{},"maintainers":[{"name":"onechiporenko","email":"onechiporenko@apache.org"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/chai-assertions-count_0.0.1_1647132900200_0.9658179959323319"},"_hasShrinkwrap":false},"1.0.0":{"name":"chai-assertions-count","version":"1.0.0","description":"Plugin for ChaiJS allows checking how many assertions, asserts or expects were run per each test","main":"./index","types":"./types/index.d.ts","scripts":{"lint":"eslint .","lint:fix":"eslint . --fix","test":"mocha -r \"./mocha-hooks.js\" \"tests/**/*.js\""},"repository":{"type":"git","url":"git+https://github.com/onechiporenko/chai-assertions-count.git"},"keywords":["chai","chai-plugin","assertions","testing"],"author":{"name":"onechiporenko"},"license":"MIT","bugs":{"url":"https://github.com/onechiporenko/chai-assertions-count/issues"},"homepage":"https://github.com/onechiporenko/chai-assertions-count#readme","devDependencies":{"@types/chai":"^4.3.0","chai":"^4.3.6","eslint":"^8.11.0","eslint-config-prettier":"^8.5.0","eslint-plugin-prettier":"^4.0.0","mocha":"^9.2.2","prettier":"^2.5.1"},"peerDependencies":{"chai":"*"},"gitHead":"d4db8d5d7a99e75113a2b1c8aa6a8443c06d7c4d","_id":"chai-assertions-count@1.0.0","_nodeVersion":"14.19.0","_npmVersion":"6.14.16","dist":{"integrity":"sha512-89mlZmQSa+m1fewSV117dcAwypGg12Lb8i++orwj0VE3njpjEl6ssocVa7JaGfn0C2U96d/SjgRwxQkhSy7z/A==","shasum":"9d5098ee50dea983d76d0bc58bb8d2e2e6c3125b","tarball":"https://registry.npmjs.org/chai-assertions-count/-/chai-assertions-count-1.0.0.tgz","fileCount":9,"unpackedSize":8469,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJiMBTqACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2Vmohjg/+Mhm1jVebhQlOleGyIB98OcqqO7EpiQb1UAgKIUtifIka5CI5\r\nWSOgnZDv2dpDi3gXBluZ6TJQTV0J7cMUsZ72tAni5ZwXFgNlLwaOafIzz9g3\r\nSo3IHrPMU8hCQyRDZ2QbyEJxAZRs8+zrifafyQrXdYOVl3fImBj8sX+V7Cad\r\ncB0LZ8jyxaKFMkSd9oY5bdK2YClYg7xJwLIbw5wLD1b6l6svb4vukgph4dg0\r\nowufWq6nY8pTW6U00Qt4Ho37YWEV4kQNot27RGAmN3Mt4qfRl61xTIEBcISm\r\n6NRaT3c4n8iNMTDEynbQ55KNRsw+kCTOSTwMM9vXFl5qUbGkG3Gcx+ZN+Z6C\r\nbIbu4v0T0csH0NslWKJe0sjl55YdBrNZGZelfyn4h6YQPfdAIEjiUndJ3/96\r\nFEw8lRosbbL7wkt46d5Vk1VuegNABDtyKNGe1QBw2sFGaVKydztM923EQWUe\r\n5w57XWcONKwIffvGs49hwgEhni6ade/oeg4bGqL4wQ4T8kJ+dwZ7K0Frgjkt\r\nEjuO7SiTyJeLa8MCRhzNCdsZPBE0PC0QH9lvxPO+FyyCW4lTs4CInmQ5KwNx\r\nXqSLXbWhwEfaRlsqNs/kxHCWEri/5lDpWgKeJN/+tix8laRcrBnKdsdVEhWB\r\n555JgEd2+aGE7HVtWfT6jq5UjkKQKKXtIEs=\r\n=D866\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIEF1jJ+xbBXKvV//9ZDMmojZsR+xr55ll8Xk1XPPb3nQAiEA2Xt8YGRfLlpeaJA7nSgWHb2y2pW9dcUkglVu17W6S24="}]},"_npmUser":{"name":"onechiporenko","email":"onechiporenko@apache.org"},"directories":{},"maintainers":[{"name":"onechiporenko","email":"onechiporenko@apache.org"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/chai-assertions-count_1.0.0_1647318250600_0.4571521178901472"},"_hasShrinkwrap":false},"1.0.2":{"name":"chai-assertions-count","version":"1.0.2","description":"Plugin for ChaiJS allows checking how many assertions, asserts or expects were run per each test","main":"./index","types":"./types/index.d.ts","scripts":{"lint":"eslint .","lint:fix":"eslint . --fix","test":"mocha -r \"./mocha-hooks.js\" \"tests/**/*.js\""},"repository":{"type":"git","url":"git+https://github.com/onechiporenko/chai-assertions-count.git"},"keywords":["chai","chai-plugin","assertions","testing"],"author":{"name":"onechiporenko"},"license":"MIT","bugs":{"url":"https://github.com/onechiporenko/chai-assertions-count/issues"},"homepage":"https://github.com/onechiporenko/chai-assertions-count#readme","devDependencies":{"@types/chai":"^4.3.0","chai":"^4.3.6","eslint":"^8.11.0","eslint-config-prettier":"^8.5.0","eslint-plugin-prettier":"^4.0.0","mocha":"^9.2.2","prettier":"^2.5.1"},"peerDependencies":{"chai":"*"},"gitHead":"b919753ebf918a1be090ab552936171513a86d90","_id":"chai-assertions-count@1.0.2","_nodeVersion":"12.22.10","_npmVersion":"6.14.16","dist":{"integrity":"sha512-TnhoI68Mh7GYsdrvQuxK+kKOTfEXQZjePP8lTvYhXGv8KOKY+GaOY3PemMq8mBAa0gqQRKsISdi7QFJ/Lxdt+g==","shasum":"61190069b2d80a31c8538f051460fad26e57ca0d","tarball":"https://registry.npmjs.org/chai-assertions-count/-/chai-assertions-count-1.0.2.tgz","fileCount":9,"unpackedSize":8977,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v4.10.10\r\nComment: https://openpgpjs.org\r\n\r\nwsFzBAEBCAAGBQJiMryrACEJED1NWxICdlZqFiEECWMYAoorWMhJKdjhPU1b\r\nEgJ2VmrN2A//Qquv+plBHhY8NRBduDMnbcFUQptu/HxhRv4+NPxXGaz4eJcj\r\nhxUfaDM9nEdSGZFeGNSsXcUJ07ZdkXLpUWiur0C9QaQUsyJYWGXgjctnnUNi\r\ngWTbkuGInhs7i/JFjQIBdQbRP8mZRaQxxEDPr4hBn6F14DbMx8CJUGHiBSPR\r\nLCdWbGLFrWRM0RgmHDdwYdlxVvgcrnIJ6AZl9iHyWP2xaZDPZTl0neWFAuIW\r\nkCjok9hiu3ZNBROHYVmb1un6ZjXc+VT7/b+jde9kRsjQM9OZCS/cYpIdDtq2\r\nRy3sCFeFvXyvYsR2n5vr0V0S3kgiKvSLkotMTLgzw7q7IqVmfKBMRzI8E/dP\r\n/zgNv1S4rTo6dVlZP5sXXEjKki78Zt3tX+jq71klxr/r6sECUtibp+lU3JKr\r\nsoBrl2o/zDR7x7YJSP9w3yt8CSf099Y5Fi12iSLE0yf31iM4uYYZo2NoJjS0\r\nKCmxOo6wQsYts1O512j6WhX1CxLofC6aH0pO+Qo2l2HtOCEV+dJWNk9y2cNu\r\nC+114KbbU+ttksWWrORTTdlG+lWHfqkj42U4soUi1Ct8XVseDRIXEHeezsFF\r\n829wlx21tENbZgq+46dt3BKQbA8rx7vonFMa2c8P8NN3TSigMEPRvkZjeaum\r\nt66ME6LWQB92K2/uFj7S0xdptsXgIgJU0R4=\r\n=pqIa\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEYCIQCE1wBaUrgf9uQHgN3ZtlE7bBoVu35i+6WoXNT+knNWLAIhAIcVrgtQxfZKEe3bgT+/dj2+Yy5sw6W9mdIH6b9Sbn6h"}]},"_npmUser":{"name":"onechiporenko","email":"onechiporenko@apache.org"},"directories":{},"maintainers":[{"name":"onechiporenko","email":"onechiporenko@apache.org"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/chai-assertions-count_1.0.2_1647492267596_0.29105020791723346"},"_hasShrinkwrap":false}},"time":{"created":"2022-03-13T00:55:00.200Z","0.0.1":"2022-03-13T00:55:00.374Z","modified":"2022-04-12T05:51:28.972Z","1.0.0":"2022-03-15T04:24:10.774Z","1.0.2":"2022-03-17T04:44:27.727Z"},"maintainers":[{"name":"onechiporenko","email":"onechiporenko@apache.org"}],"description":"Plugin for ChaiJS allows checking how many assertions, asserts or expects were run per each test","homepage":"https://github.com/onechiporenko/chai-assertions-count#readme","keywords":["chai","chai-plugin","assertions","testing"],"repository":{"type":"git","url":"git+https://github.com/onechiporenko/chai-assertions-count.git"},"author":{"name":"onechiporenko"},"bugs":{"url":"https://github.com/onechiporenko/chai-assertions-count/issues"},"license":"MIT","readme":"# Chai Assertions Count\n\n[![CI](https://github.com/onechiporenko/chai-assertions-count/actions/workflows/ci.yml/badge.svg)](https://github.com/onechiporenko/chai-assertions-count/actions/workflows/ci.yml)\n[![npm version](https://badge.fury.io/js/chai-assertions-count.png)](http://badge.fury.io/js/chai-assertions-count)\n[![Downloads](http://img.shields.io/npm/dm/chai-assertions-count.svg)](https://www.npmjs.com/package/chai-assertions-count)\n[![License](http://img.shields.io/:license-mit-blue.svg)](http://doge.mit-license.org)\n\n> Plugin for ChaiJS allows checking how many assertions or expects were run per each test.\n\n## Why do we need to check it?\n\nLet's look at the test:\n\n```js\nimport InstanceGenerator from '../lib/instances-generator';\n\ndescribe('suite #1', () => {\n  it('test #1', () => {\n    class S1T1A {\n      /* Other props and methods are skipped */\n      /**\n       * I'm called after any instance of S1T1A is created\n       */\n      afterCreate(...args) {\n        // I need to check `args` here\n        // chai.expect(args)... \n      }\n    }\n    InstanceGenerator.create(S1T1A, 3); // create 3 instances of S1T1A\n  });\n});\n```\n\nTest looks pretty dummy, but its main idea that it's not possible to figure out was `afterCreate` called or not without dummy flag. It must be initialized on the top of the test. Then it must be toggle inside `afterCreate` and another `expect` must be added at the end of the test.\n\nTests becomes less readable.\n\nBetter way is to check how many `expect` were done.\n\n## Install\n\n```shell\nnpm i -D chai-assertions-count\n```\n\nor\n\n```shell\nyarn add -D chai-assertions-count\n```\n\n## Plugin\n\nUse this plugin as you would all other Chai plugins.\n\n```js\nconst chai = require('chai');\nconst chaiAssertionsCount = require('chai-assertions-count');\n\nchai.use(chaiAssertionsCount);\n```\n\n## Usage\n\n```js\nconst chai = require('chai');\nconst chaiAssertionsCount = require('chai-assertions-count');\nchai.use(chaiAssertionsCount);\n\ndescribe('suite #2', () => {\n  beforeEach(() => {\n    chai.Assertion.resetAssertsCheck();\n  });\n  afterEach(() => {\n    // you don't need both of them\n    chai.Assertion.checkAssertionsCount();\n    chai.Assertion.checkExpectsCount();\n  });\n});\n```\n\nMethod `resetAssertsCheck` just drops internal counters and **must** be used before each test.\n\nMethod `checkExpectsCount` calculated how many times `chai.expect` was called. Use it in case when your tests use [Expect](https://www.chaijs.com/guide/styles/#expect) style.\n\nMethod `checkAssertionsCount` calculated how many assertions were done. Main difference between this method and previous one is that single `expect` may do more than one `assertion`. Example below illustrates this:\n\n```js\nconst chai = require('chai');\nconst chaiAssertionsCount = require('chai-assertions-count');\nchai.use(chaiAssertionsCount);\n\ndescribe('suite #3', () => {\n  it('test #1', () => {\n    chai.Assertion.expectAssertions(3);\n    chai.Assertion.expectExpects(2);\n\n    chai.expect(1).to.be.equal(1);\n    chai.expect([]).to.have.property('length', 0);\n  });\n});\n```\n\nHere are **two** expects and we \"expect\" that two of them will be executed. In the same time there are **three** assertions \"under the hood\". First `expect` has a single assertion. However, second `expect` has two of them. First one checks that property `length` exists and another one checks its value. So, be aware with `expectAssertions` counter.\n\nMethod `expectExpects` can cover most cases, so `expectAssertions` won't be used in 99.9%.\n\n## Restrictions\n\n* Works only with [Expect](https://www.chaijs.com/guide/styles/#expect) style.\n* Stop other tests in the current suite on `expectExpects` or `expectAssertions` fail.","readmeFilename":"README.md"}