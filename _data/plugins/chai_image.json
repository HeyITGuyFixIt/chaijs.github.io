{"_id":"chai-image","_rev":"3-690ab0140711bea19e4a2c97d9c772ba","name":"chai-image","dist-tags":{"latest":"1.1.1"},"versions":{"1.0.0":{"name":"chai-image","version":"1.0.0","description":"Extends Chai with assertions about images","main":"index.js","types":"index.d.ts","scripts":{"build":"tsc","prepublishOnly":"npm run build","test":"mocha -r ts-node/register index.spec.ts","lint":"tslint -c tslint.json index.ts"},"repository":{"type":"git","url":"git+https://github.com/mooyoul/chai-image.git"},"keywords":["chai","image","pixeldiff","chai-plugin","imagediff"],"author":{"name":"MooYeol Prescott Lee","email":"mooyoul@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/mooyoul/chai-image/issues"},"homepage":"https://github.com/mooyoul/chai-image#readme","devDependencies":{"@types/chai":"4.2.3","@types/mkdirp":"0.5.2","@types/mocha":"5.2.7","@types/node":"8.10.54","@types/pixelmatch":"5.0.0","@types/pngjs":"3.3.2","@vingle/commitlint-preset":"1.0.3","@vingle/semantic-release-config":"1.0.3","@vingle/tslint-preset":"1.0.0","chai":"4.2.0","del":"5.1.0","husky":"3.0.5","mocha":"6.2.0","ts-node":"8.4.1","tslint":"5.20.0","typescript":"3.6.3"},"dependencies":{"mkdirp":"^0.5.1","pixelmatch":"^5.0.2","pngjs":"^3.4.0"},"config":{"commitizen":{"path":"cz-conventional-changelog"}},"husky":{"hooks":{"commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@vingle/commitlint-preset"]},"gitHead":"59af7e28feac838ce43d92e13bb65c217a429eb1","_id":"chai-image@1.0.0","_nodeVersion":"10.16.3","_npmVersion":"6.11.3","dist":{"integrity":"sha512-w20ej0iz9J89R1MKhJ7xqw48+iH0ewAzZaiLG3Af+yPod5QRH4LiqWFED2rgLZfyh8pMzL4KuydDX2b+dDlCsQ==","shasum":"4adcb88c1b24c7531ca7e03cc9aa55ef37039725","tarball":"https://registry.npmjs.org/chai-image/-/chai-image-1.0.0.tgz","fileCount":7,"unpackedSize":11058,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJdgTvbCRA9TVsSAnZWagAAchsP/3pPhFOZl7VOkgXHn+J2\ns1wPRW21J//KfuWc2fSGNATU1qDJP0IBrTQvdSRBwUsnWn6OU4A+oPG2UnWN\nPdhvLyc6Qk3y609MQ/HMpBwFN1vXFvJCiEuxx2+PzAzhkQWpUew91avSmmCk\n70S2MEjWNJJQctCvXuhB1jnMaN2pZ+3HuN7W9M5GyOLoHzYoD1xkssbrh6gv\nPrwxVmlal5lj6sxEtjWG/ol8RMfjGpKK8W8oILioD/487pAfsm/G6LwSlHKv\n792AGpxL8SlL78gP+1i1OUlb+zQ7BoaQFxtd7RPBFJkFBR4rt88JQIuOqj1X\ns3PbHYXjgRLQiYAVvQQxlbQeIHJhIc2u30FMuTnMe6w9CuwpUUiPNvShLBn+\nxmbaPSzFJSQUbRdZAsncGbpohjAGOzGfrQoVIBfL9IiQMUKcT62u0SLcZTV5\ndFgXHz2vqdlV/KAjYRaoT2t8beYOQGB4KfUcfsk6on1Bjc1L5fA8Vt9PtPAJ\nQxecqW+DUJlnksL6ACC4QuT8CjfQEHK9uNPmD1Vs0cII/EBT+g74mEsHFiR6\nJ/FB4q0Dq3uvUI9xuJ7rI7eGtU5cRM27jEXsrt/D0EZLZL4uAS9GDprt/C3k\nQt+kwfDQH43RGFBzeZVw22X5FhVEdxv4IKbol29q/EUxYlF/koFBgKFFChe7\n0xN0\r\n=uA36\r\n-----END PGP SIGNATURE-----\r\n"},"maintainers":[{"name":"mooyoul","email":"mooyoul@gmail.com"}],"_npmUser":{"name":"mooyoul","email":"mooyoul@gmail.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/chai-image_1.0.0_1568750554452_0.5609764370178845"},"_hasShrinkwrap":false},"1.0.1":{"name":"chai-image","version":"1.0.1","description":"Extends Chai with assertions about images","main":"index.js","types":"index.d.ts","scripts":{"build":"tsc","prepublishOnly":"npm run build","test":"mocha -r ts-node/register index.spec.ts","lint":"tslint -c tslint.json index.ts"},"repository":{"type":"git","url":"git+https://github.com/mooyoul/chai-image.git"},"keywords":["chai","image","pixeldiff","chai-plugin","imagediff"],"author":{"name":"MooYeol Prescott Lee","email":"mooyoul@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/mooyoul/chai-image/issues"},"homepage":"https://github.com/mooyoul/chai-image#readme","devDependencies":{"@types/chai":"4.2.3","@types/mkdirp":"0.5.2","@types/mocha":"5.2.7","@types/node":"8.10.54","@types/pixelmatch":"5.0.0","@types/pngjs":"3.3.2","@vingle/commitlint-preset":"1.0.3","@vingle/semantic-release-config":"1.0.3","@vingle/tslint-preset":"1.0.0","chai":"4.2.0","del":"5.1.0","husky":"3.0.5","mocha":"6.2.0","ts-node":"8.4.1","tslint":"5.20.0","typescript":"3.6.3"},"dependencies":{"mkdirp":"^0.5.1","pixelmatch":"^5.0.2","pngjs":"^3.4.0"},"config":{"commitizen":{"path":"cz-conventional-changelog"}},"husky":{"hooks":{"commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@vingle/commitlint-preset"]},"gitHead":"db54725d23bf18dbdc6e1c34551fd97c68b4d0b3","_id":"chai-image@1.0.1","_nodeVersion":"10.16.3","_npmVersion":"6.11.3","dist":{"integrity":"sha512-q68M2L/1XFi6N7vQphH76nmXl7KfeeM1nblqNQoERMEQZNWJ2P3KC/eCsTT1aWa0I3aUv15PSrdp37yUrNNHwQ==","shasum":"7bafe62d2e81aa75e0c227578d41ad01aa9e966f","tarball":"https://registry.npmjs.org/chai-image/-/chai-image-1.0.1.tgz","fileCount":7,"unpackedSize":12213,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJdgUHRCRA9TVsSAnZWagAA0qkP/RzsT6ysD+ZbI1omtOnV\nt98qCFv+0dAqzv7W6wiLpJIYk55Rqcfk8vErFjC+Yq+D60Hhua/6qIvqBtOc\n+cfWdqnH9DEAxOHFzJnD43ugVkBEODyaXkY53Nt7MMSVYpbY/IRUyy4TaZDc\nhAwxPwXXh/z8aVKoW1qTeoVW/LXr+WXW9/fdSCMKhG43Z3ays/uUEwTfQAbJ\nDj9PH0kY/7PDW+h/K80uWAz/g4t6/TsW0Q1rhjEWggNeyPMORTdPk2nUxRf+\nACh0Z7D4VhAdP6dsPfJ9vlMRkAtSD7YLjSouORvBicvBqIUAk+9ww13sJAOd\nN206TqtbXfX/QdCvQLmn7nPxIB33Mi5qJI9n8i/xfGeR9kSrFfuUE9HPa0tK\nAv1dlOo1s5xfyHk+oYv0VtmcVS6UdfSOPNkjUqi6qBqHkfjbQo2dxf7eNh7U\ncrHc/kJu0cICEFuCqILXT1uFnV80jo0pFfIFEkVd43q2jne4ZMmi/Y8sDJl0\nIirCeou03Ukup+Dc2mCuWWHLk5EL8KxIt2jTiYHEkZ/YVtF/gSL2a5ldR4aO\nZXOT+Smpz1IKzdeCSQVKmN/4cBLa+faY5EjYVf0XmeFaBJLFgcx4gkWbvhbw\nuT3xspj4D/0ZGs4uWFNp9jqZte8960xENkfmGtCofu+ELaDzQB9KobZ0GHnV\nL2M5\r\n=dmtz\r\n-----END PGP SIGNATURE-----\r\n"},"maintainers":[{"name":"mooyoul","email":"mooyoul@gmail.com"}],"_npmUser":{"name":"mooyoul","email":"mooyoul@gmail.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/chai-image_1.0.1_1568752081310_0.31775879986077427"},"_hasShrinkwrap":false},"1.1.0":{"name":"chai-image","version":"1.1.0","description":"Extends Chai with assertions about images","main":"index.js","types":"index.d.ts","scripts":{"build":"tsc","prepublishOnly":"npm run build","test":"mocha -r ts-node/register index.spec.ts","lint":"tslint -c tslint.json index.ts"},"repository":{"type":"git","url":"git+https://github.com/mooyoul/chai-image.git"},"keywords":["chai","image","pixeldiff","chai-plugin","imagediff"],"author":{"name":"MooYeol Prescott Lee","email":"mooyoul@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/mooyoul/chai-image/issues"},"homepage":"https://github.com/mooyoul/chai-image#readme","devDependencies":{"@types/chai":"4.2.3","@types/mkdirp":"0.5.2","@types/mocha":"5.2.7","@types/node":"8.10.54","@types/pixelmatch":"5.0.0","@types/pngjs":"3.3.2","@vingle/commitlint-preset":"1.0.3","@vingle/semantic-release-config":"1.0.3","@vingle/tslint-preset":"1.0.0","chai":"4.2.0","del":"5.1.0","husky":"3.0.5","mocha":"6.2.0","ts-node":"8.4.1","tslint":"5.20.0","typescript":"3.6.3"},"dependencies":{"mkdirp":"^0.5.1","pixelmatch":"^5.0.2","pngjs":"^3.4.0"},"config":{"commitizen":{"path":"cz-conventional-changelog"}},"husky":{"hooks":{"commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@vingle/commitlint-preset"]},"gitHead":"ba0e407bd576c75684f216b29431a40721ece769","_id":"chai-image@1.1.0","_nodeVersion":"10.16.3","_npmVersion":"6.11.3","dist":{"integrity":"sha512-BgxbAv7XUPviv+hOflHvEFGXTmnA1u1jeEXC9sgIHwzhH/pdDndfdnVlVO27JTmpOntixffZIgcyaxzUaFUa4w==","shasum":"d10b580e7756fdd75afef444616da1a948453266","tarball":"https://registry.npmjs.org/chai-image/-/chai-image-1.1.0.tgz","fileCount":7,"unpackedSize":13212,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJdgggeCRA9TVsSAnZWagAA66MP/iaFIhriuu1eulTcYibd\nQ+sSCOOL44A9Z0g/EPt7pvgdvyCc19pzkiHYaKhX81EoDJRb2XjKHZFH0FvF\nYrHLraaKdMyO2uq8seC8cPR3MmmxoS47dv4xwCOshvgbVmzs4x9zh33RbOp6\n4Fe9u+50RzBuJrB7A+KYnBw/WRjS2OEVgNJmY1tyzUEhh0qCUZn9poSizenp\nsw69o3Im99sPtJqlELYkqa32fv3LxI16RRie9ftH1U2gMl/gFHz2fRyyW/UE\n+oXxSBTNHwrBy50ourTmlaCE1mUDY866BPh+vA6gWssGcXCifrwHr+PHZQj8\nQiZdZDW8n+ShGXBTTGfI8GsnKjNksQGOV7u+zC8e3jGQWw8leZcMRxmlWDj7\ntOErakKcDIYNnHBBKOb6IZ/xhXTtVA7mykZLYxO+axuqbGLhhZ99UQXG5JuG\nqGZ8fCknrZT2fd/uk/z279cG3ur/dT7yISlx3e3Psoo/wqGoVgaoRsXscwCF\nls2BZo1fUze2hdBlC+AMsSk6GLmpN6zCuoO0sS6ScXzfUacgPBGKrkMdSDnc\n3g8tA/lCqWQwHfSqBMYztT3HxYoRK/V70GWEfVB3Aj/siiotoVbngI99OZpA\nYQF2BLM8IVb3SxwaFY4/epsn5E5DcaCVw4xsueo46Z4JM78i5TPWapdP9fCi\nlYxs\r\n=Rq7S\r\n-----END PGP SIGNATURE-----\r\n"},"maintainers":[{"name":"mooyoul","email":"mooyoul@gmail.com"}],"_npmUser":{"name":"mooyoul","email":"mooyoul@gmail.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/chai-image_1.1.0_1568802845860_0.9388598567400943"},"_hasShrinkwrap":false},"1.1.1":{"name":"chai-image","version":"1.1.1","description":"Extends Chai with assertions about images","main":"index.js","types":"index.d.ts","scripts":{"build":"tsc","prepublishOnly":"npm run build","test":"mocha -r ts-node/register index.spec.ts","lint":"tslint -c tslint.json index.ts"},"repository":{"type":"git","url":"git+https://github.com/mooyoul/chai-image.git"},"keywords":["chai","image","pixeldiff","chai-plugin","imagediff"],"author":{"name":"MooYeol Prescott Lee","email":"mooyoul@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/mooyoul/chai-image/issues"},"homepage":"https://github.com/mooyoul/chai-image#readme","devDependencies":{"@types/chai":"4.2.7","@types/mkdirp":"0.5.2","@types/mocha":"5.2.7","@types/node":"8.10.59","@types/pixelmatch":"5.0.0","@types/pngjs":"3.4.0","@vingle/commitlint-preset":"1.0.3","@vingle/semantic-release-config":"1.0.5","@vingle/tslint-preset":"1.0.0","chai":"4.2.0","del":"5.1.0","husky":"3.1.0","mocha":"6.2.2","ts-node":"8.5.4","tslint":"5.20.1","typescript":"3.7.4"},"dependencies":{"mkdirp":"^0.5.1","pixelmatch":"^5.0.2","pngjs":"^3.4.0"},"config":{"commitizen":{"path":"cz-conventional-changelog"}},"husky":{"hooks":{"commit-msg":"commitlint -E HUSKY_GIT_PARAMS"}},"commitlint":{"extends":["@vingle/commitlint-preset"]},"gitHead":"fd6c2a9bce545d8e532fb2faefb23cafe854af14","_id":"chai-image@1.1.1","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-Wh5aMyU+wnCXnRcNEmok9ZgQyZJGf9RZy90294bKFAfmtiU/+k5PB/HYoyhbXGBQXOqSFEuc2Ci+veUKzphZzg==","shasum":"1be7904737954eaf82f3fc3a6309cce4bcb5c6a2","tarball":"https://registry.npmjs.org/chai-image/-/chai-image-1.1.1.tgz","fileCount":7,"unpackedSize":13492,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJeCMF7CRA9TVsSAnZWagAAbOUP+QC0FPPkQIqr/nv/miT/\nm/L94K0eFCkQFUbZmjXctavN08Lfng9erC+NCUOSJ33zttgtKPXTfe+mpl3b\nr9+8zypu57KgFqeF8HBTXsCNzTsf1Mijz1844RH06Vf0EMnvQfQPEF4ulyny\ni4n3+UoGa0eNmaD9ezoBTgI/XjhVCc2Sdyn95ZDOCOYfJpK+5b8tBjUKN0kg\nJ1STaqFXuRd12BBeERtKzAHOEyljCL0IB5iWqy+SCpIXWXRkEqUMaqKHck9o\noIoggun1n2FKFj4bmEJ02BzRbJ3Hq82lg93xr4PuuPzvhVQdwmzZVLXWo2BN\nUrclWKy6AL6aJrBQfalr+tOktgtRc+EaTdXQoMvFfswqlPHeF9KExULxuRI7\ntcBK4BvWWFAl5Li4e0hFSm3tzkH/Ue/wy8Paz90x2hnxuHSeGkr8VfibVBEF\nXjWmr38/l8KWB1v8gUFRE7xqCYCG90Lv/N08m9a43y+WUf8w/b0VBI58ijJF\nUFMYDsG2W7/Hnc4CMH4gXkOaeMciN90q7eNOnsfDqDrNmJ3jzmfaLXL22QlM\nFtwC3J1hQxO+EyIc/QV0mgoaWifoSFTomyu6Eejf/oxdYM57SVZMWcEGxE+a\nGWz8bJTp/N9pfjrUvNfy5NapE0peBNwAK3USLNvqOdy9NcDHujebh59Mwcwd\n2sKO\r\n=Srsh\r\n-----END PGP SIGNATURE-----\r\n"},"maintainers":[{"name":"mooyoul","email":"mooyoul@gmail.com"}],"_npmUser":{"name":"mooyoul","email":"mooyoul@gmail.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/chai-image_1.1.1_1577632123053_0.0018193725160777774"},"_hasShrinkwrap":false}},"time":{"created":"2019-09-17T20:02:34.451Z","1.0.0":"2019-09-17T20:02:34.577Z","modified":"2019-12-29T15:08:45.570Z","1.0.1":"2019-09-17T20:28:01.522Z","1.1.0":"2019-09-18T10:34:05.947Z","1.1.1":"2019-12-29T15:08:43.209Z"},"maintainers":[{"name":"mooyoul","email":"mooyoul@gmail.com"}],"description":"Extends Chai with assertions about images","homepage":"https://github.com/mooyoul/chai-image#readme","keywords":["chai","image","pixeldiff","chai-plugin","imagediff"],"repository":{"type":"git","url":"git+https://github.com/mooyoul/chai-image.git"},"author":{"name":"MooYeol Prescott Lee","email":"mooyoul@gmail.com"},"bugs":{"url":"https://github.com/mooyoul/chai-image/issues"},"license":"MIT","readme":"# chai-image\n\n[![Build Status](https://github.com/mooyoul/chai-image/workflows/workflow/badge.svg)](https://github.com/mooyoul/chai-image/actions)\n[![Semantic Release enabled](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg)](https://github.com/semantic-release/semantic-release)\n[![Renovate enabled](https://img.shields.io/badge/renovate-enabled-brightgreen.svg)](https://renovatebot.com/)\n[![MIT license](http://img.shields.io/badge/license-MIT-blue.svg)](http://mooyoul.mit-license.org/)\n\nExtends Chai with assertions about images\n\n```typescript\nexpect(bufImage).to.matchImage(bufExpectedImage);\n```\n\n\n![Example](example.png)\n\n| Expected | Actual |\n| --- | --- |\n| ![Expected Image](fixtures/red_velvet_perfect_velvet_all_2_co_m_l.png) | ![Actual Image](fixtures/red_velvet_perfect_velvet_all_2_co_l.png)\n\n| Diff (LEFT_TOP Aligned) | Diff (CENTER Aligned)\n| --- | --- |\n| ![Diff Image](fixtures/test_diff_left_top.png) | ![Diff Image](fixtures/test_diff_center.png) |\n\nIn this case, `matchImage` assertion will fail.\n\n## Usage\n\nInstall `chai-image` to get up and running. \n\n```bash\n$ npm install chai-image --save-dev\n```\n\nThen:\n\n```typescript\nimport * as chai from \"chai\";\nimport { chaiImage } from \"chai-image\";\n\nchai.use(chaiImage);\n\n// Then either:\nconst expect = chai.expect;\n// or:\nconst assert = chai.assert;\n// or:\nchai.should();\n// according to your preference of assertion style\n\n```\n\n## Assertions\n\n#### `matchImage(expected: Buffer, options?: MatchImageOptions)`\n\n> NOTE: Currently it only supports PNG image format.\n\n##### Example\n\n```typescript\n// Simple Example\nimport * as fs from \"fs\";\n\nconst bufActual = fs.readFileSync(\"actual.png\");\nconst bufExpected = fs.readFileSync(\"expected.png\");\n\nexpect(bufActual).to.matchImage(bufExpected);\n```\n\n```typescript\n// Real-world Example\nimport * as sharp from \"sharp\";\n\nclass ImageService {\n  public async transform(buf: Buffer): Promise<Buffer> {\n    return await sharp(buf).resize().max(320, 320).png().toBuffer();\n  }\n}\n\nconst service = new ImageService();\n\ndescribe(\"ImageService\", () => {\n  describe(\"#transform\", () => {\n    it(\"should transform image\", async () => {\n      const input = fs.readFileSync(\"fixtures/input.png\");\n      const output = fs.readFileSync(\"fixtures/output.png\");\n      \n      expect(await service.transform(input)).to.matchImage(output);\n    });\n  });\n});\n\n```\n\nTests image matches to given image or not.\n\nImage comparision is proceeded by [pixelmatch](https://github.com/mapbox/pixelmatch) library.\nIf output config is provided, `chai-image` will create some files to show diff results.\n\n\n\n```typescript\n\nenum Align {\n  LEFT_TOP = \"leftTop\",\n  CENTER = \"center\",\n}\n\ninterface MatchImageOptions {\n  // Custom diff config passed to pixelmatch\n  diff?: DiffOptions;\n  \n  // Image aligning config for aligning different size image (default: Align.LEFT_TOP)\n  align?: Align;\n  \n  // Output config\n  // if specified, chai-image will create output files to visualize diff \n  output?: OutputOptions;\n}\n\ninterface DiffOptions {\n  threshold?: number;\n  includeAA?: boolean;\n  alpha?: number;\n  aaColor?: [number, number, number];\n  /* The color of differing pixels in the diff output. [255, 0, 0] by default. */\n  diffColor?: [number, number, number];\n}\n\ninterface OutputOptions {\n  // Currently name is used to generate filename\n  name: string;\n  // Path of output directory (default: WORKDING_DIR/outputs)\n  dir?: string;\n  \n  // Output creation conditions\n  // Controls when to create output files (default: failure)\n  on?: \"failure\" | \"always\";\n  \n  // Controls output file types (default: false)\n  diffOnly?: boolean;\n}\n```\n\n## Changelog\n\nSee [CHANGELOG](/CHANGELOG.md).\n\n## Testing\n\n```bash\n$ npm run test\n```\n\n## Build\n\n```bash\n$ npm run build\n```\n\n\n## License\n[MIT](LICENSE)\n\nSee full license on [mooyoul.mit-license.org](http://mooyoul.mit-license.org/)\n","readmeFilename":"README.md"}