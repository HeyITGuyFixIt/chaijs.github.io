{"_id":"chai-eventemitter2","name":"chai-eventemitter2","dist-tags":{"latest":"0.1.0"},"versions":{"0.1.0":{"name":"chai-eventemitter2","version":"0.1.0","description":"Chai plugin for testing node-style EventEmitters","main":"lib/chai-eventemitter2","scripts":{"test":"mocha","coverage":"nyc --reporter=html npm test"},"repository":{"type":"git","url":"git+ssh://git@github.com/leonardoraele/chai-eventemitter2.git"},"keywords":["chai","chai-plugin","plugin","eventemitter","event","emitter","test"],"author":{"name":"Leonardo Raele","email":"leonardoraele@gmail.com"},"license":"MIT","bugs":{"url":"https://github.com/leonardoraele/chai-eventemitter2/issues"},"homepage":"https://github.com/leonardoraele/chai-eventemitter2#readme","devDependencies":{"chai":"^4.3.4","mocha":"^8.3.2","nyc":"^15.1.0"},"dependencies":{"deep-equal":"^2.0.5"},"gitHead":"0b3dd2eb819050a75941f751002e1a75249364fe","_id":"chai-eventemitter2@0.1.0","_nodeVersion":"15.12.0","_npmVersion":"7.6.3","dist":{"integrity":"sha512-AhVIzgahYcyYLZJMWZUnsPELGNRfXNVC5DqRyjkPp/Rft5RPG+TpmQqBdP1XSv5s8Adg1omFtkl4ttaq7KUbog==","shasum":"b8412594d039d69e28ec8d3be23b40fea27d9862","tarball":"https://registry.npmjs.org/chai-eventemitter2/-/chai-eventemitter2-0.1.0.tgz","fileCount":8,"unpackedSize":25779,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.13\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJgcxv9CRA9TVsSAnZWagAAdU8P/2zSewDe5sBYY6+jNCml\nj5NWHhbDuY3GgbSNxxYFqbNyVIsimE1q1JgzJGeT1dBYyX52y9LD0+UTw66r\nxULsmM4AOcqJeNUqOm+JN6Ox521nBj9tkwErcKw4YGI3U5NhrLkzpwKaMqNu\nIulURC6wKSouH4dqZD+mkWpLiH1xVUruEbuAVlLbzPMpnQWzfdFUrj7lxa7V\nxZnD2/DhxbE2a31JvXBtuwOZLF17OtsnZBX6FnlPIdoHG5SzOauOBk/rYGOn\ntc/ZOSocHbj9kwWah1nKAHhjDOzeRJnj0HpGqpeNpdc3bpjsdf+wS53AZ3HY\njWv3xHhXqYcjcSPi/ez1ncx25VzY3A601/Jj/xPwSzCuTSEo6H8Iyxa/odNz\nG+r4GE9bERYWCIjImF49R8dkoI/tgqLc0TWJI5fVk34Z1Rs24fLt2MXtI3pF\n62/uuhgGEQB5l+OTA45vJR78GAXoeYnxeRac4k9d+v+hYp+XwXf3BLJ0dDGE\nj2f/OPIA5mVBFg6zi0Ptgd8PlrUEQqGm+dOGnVfKdQw9Fircp46S0vERx2Vc\nAU6qDxshCHHBUGoBoIMGoSaibq8qy6euU+UaphA411MCfGtyjOVqeuXux5jy\nE3+R58jbOODHNsQ4QQHm7kRafcH8cwaE7Zm3xQb2L4T0fxfCPK+xcpNLtYLz\nizIP\r\n=2Trw\r\n-----END PGP SIGNATURE-----\r\n"},"_npmUser":{"name":"leonardoraele","email":"leonardoraele@gmail.com"},"directories":{},"maintainers":[{"name":"leonardoraele","email":"leonardoraele@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/chai-eventemitter2_0.1.0_1618156541210_0.11457442002548612"},"_hasShrinkwrap":false}},"time":{"created":"2021-04-11T15:55:41.209Z","0.1.0":"2021-04-11T15:55:41.339Z","modified":"2021-04-11T15:55:43.527Z"},"maintainers":[{"name":"leonardoraele","email":"leonardoraele@gmail.com"}],"description":"Chai plugin for testing node-style EventEmitters","homepage":"https://github.com/leonardoraele/chai-eventemitter2#readme","keywords":["chai","chai-plugin","plugin","eventemitter","event","emitter","test"],"repository":{"type":"git","url":"git+ssh://git@github.com/leonardoraele/chai-eventemitter2.git"},"author":{"name":"Leonardo Raele","email":"leonardoraele@gmail.com"},"bugs":{"url":"https://github.com/leonardoraele/chai-eventemitter2/issues"},"license":"MIT","readme":"# chai-eventemitter2\nThis is a [chai](chaijs.com) plugin for testing node-style\n[EventEmitters](https://nodejs.org/api/events.html).\n\n## Compatibility\n\n- Node.js 14.5+\n\n## Installation\n\n1. Install the plugin:\n\n\t- Using NPM:\n\n\t\t```bash\n\t\tnpm install -D chai-eventemitter2\n\t\t```\n\n\t- Using Yarn:\n\n\t\t```bash\n\t\tyarn add -D chai-eventemitter2\n\t\t```\n\n1. Add this your test setup:\n\n\t```js\n\tconst chai = require('chai');\n\tconst eventemitter2 = require('chai-eventemitter2');\n\n\tchai.use(eventemitter2);\n\t```\n\n## Usage\n\nWith [Expect API](https://www.chaijs.com/api/bdd/):\n\n```js\nconst emitter = new EventEmitter();\n\nexpect(emitter).to.be.an.eventEmitter;\n\nexpect(emitter)\n\t.to.emit('foo')\n\t.to.emit('bar', {count: 2})\n\t.to.emit('baz', {withArgs: ['X', 'Y', 'Z']})\n\t.to.emit('error', {count: 0})\n\t.on(() =>\n\t{\n\t\temitter.emit('foo');\n\t\temitter.emit('bar');\n\t\temitter.emit('bar');\n\t\temitter.emit('baz', 'X', 'Y', 'Z');\n\t});\n```\n\n## API\n\n### `Assertion.eventEmitter`\n\nValidates if the asserted object is an EventEmitter based on it's properties.\n(i.e. it must be an object with `on` and `emit` methods, etc.)\n\nSee an example in the [usage](#usage) section.\n\n### `Assertion.emit(event[, options])`\n\nRegisters an expected event.\n\n- `event: string`\n\tThe name of the event.\n- `options.count: number|{min: number?, max: number?}`\n\tDetermines the number of times the event is expected to be emitted.\n\tCan be a fixed amount or a range.\n\t[default=1]\n- `option.argsMatch: 'deep'|'exact'|'soft'`\n\tIf you pass an array of expected arguments to the `withArgs` option,\n\tyou can use this option to determine how the actual event arguments will be\n\tcompared to the expected values.\n\n\t- `'deep'` Makes a deep comparison between the elements of the `withArgs`\n\t\tarray and the event arguments.\n\t- `'exact'` Makes reference-equality comparison (`===`) between each element\n\t\tof the `withArgs` array and the event arguments.\n\t- `'soft'` Expects the emitted event to contain the arguments set in the\n\t\t`withArgs` array, but ignores extra arguments.\n\t\tIf the array contains objects, search for the object properties in the\n\t\temitted event arguments but ignores extra properties.\n\n\t\tThis is the default comparison method.\n\n\tIf `withArgs` option is omitted or is not an array, this option is ignored.\n- `options.withArgs: any[]|(any) => boolean`\n\tUsed to validate the event arguments.\n\tIf you pass an array, the plugin will expect the event arguments to match\n\tthe values of the array.\n\tIf you pass a callback function, it will be called with the arguments of the\n\tevent so that you can make complex validations.\n\n### `Assertion.on((EventEmitter) => undefined)`\n\nCall this method with a callback function with the code that emits events.\nThe callback will be called and it is expected to emit all the events that were\nregistered with `emit`, otherwise the test fails.\n\nSee an example in the [usage](#usage) section.\n\n## Known Issues\n\n- ⚠️ It's unable to validate event arguments with `withArgs` option if the\narguments have circular refereneces.\n- ⚠️ It doesn't work with the \"not\" flag (`.not`).\n\tYou can work around this issue using the `count` option.\n\t(i.e. set the `count` of events you don't want to be emitted to `0`)\n- ⚠️ Not tested for asynchrony.\n\n## Disclaimer\n\nInspired by [fengb/chai-eventemitter](https://github.com/fengb/chai-eventemitter).\n\nI made this package because `fengb/chai-eventemitter` doesn't have features I needed for myself.\n\n## License\n\nMIT\n","readmeFilename":"README.md"}